{"version":3,"sources":["../src/index.js"],"names":["Image","props","state","width","height","isNoImage","resizeImage","bind","showNoImage","findDOMNode","refs","image","originalWidth","naturalWidth","originalHeight","naturalHeight","widthRatio","heightRatio","setState","noImageSrc","undefined","style","wrapper","position","backgroundColor","display","left","top","noImageAlt","src","alt","Component","PropTypes","string","isRequired","number","object"],"mappings":"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","file":"index.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { m } from './utils';\n\nexport default class Image extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      width: 0,\n      height: 0,\n      isNoImage: false,\n    };\n    this.resizeImage = this.resizeImage.bind(this);\n    this.showNoImage = this.showNoImage.bind(this);\n  }\n\n  resizeImage() {\n    if (ReactDOM.findDOMNode(this.refs.image) == null) {\n      return;\n    }\n    const originalWidth = ReactDOM.findDOMNode(this.refs.image).naturalWidth;\n    const originalHeight = ReactDOM.findDOMNode(this.refs.image).naturalHeight;\n    const widthRatio = this.props.width / originalWidth;\n    const heightRatio = this.props.height / originalHeight;\n    if (widthRatio < heightRatio) {\n      this.setState({\n        width: originalWidth * widthRatio,\n        height: originalHeight * widthRatio,\n      });\n    } else {\n      this.setState({\n        width: originalWidth * heightRatio,\n        height: originalHeight * heightRatio,\n      });\n    }\n  }\n\n  showNoImage() {\n    if (this.props.noImageSrc == undefined) {\n      return;\n    }\n    this.setState({\n      isNoImage: true,\n    });\n  }\n\n  render() {\n    const style = {\n      wrapper: {\n        position: 'relative',\n        width: this.props.width,\n        height: this.props.height,\n        backgroundColor: this.props.backgroundColor,\n      },\n      image: {\n        position: 'absolute',\n        display: 'block',\n        left: (this.props.width - this.state.width) / 2,\n        top: (this.props.height - this.state.height) / 2,\n        width: this.state.width,\n        height: this.state.height,\n      },\n    };\n    if (this.state.isNoImage) {\n      return (\n        <div style={m(this.props.style, style.wrapper)}>\n          <img\n            ref=\"image\" src={this.props.noImageSrc} alt={this.props.noImageAlt || 'noimage'} style={style.image}\n            onLoad={this.resizeImage}\n          />\n        </div>\n      );\n    } else {\n      return (\n        <div style={m(this.props.style, style.wrapper)}>\n          <img\n            ref=\"image\" src={this.props.src} alt={this.props.alt} style={style.image}\n            onLoad={this.resizeImage}\n            onError={this.showNoImage}\n          />\n        </div>\n      );\n    }\n  }\n}\n\nImage.PropTypes = {\n  src: PropTypes.string.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  alt: PropTypes.string,\n  backgroundColor: PropTypes.string,\n  style: PropTypes.object,\n  noImageSrc: PropTypes.string,\n  noImageAlt: PropTypes.string,\n};\n"]}